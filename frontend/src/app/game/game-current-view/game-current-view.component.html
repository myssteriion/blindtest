<div *ngIf="isLoaded" class="container-fluid" @flyInOut>
	
	<!-- header & exit -->
	<div class="row m-auto">
		<div class="offset-2 col-8">
			<myst-header [title]="getTitle()"></myst-header>
		</div>
		<div class="col-2 game-current-view-exit">
			<fa-icon [icon]="faQuestionCircle" class="fa-icon-custom-hover-orangered" size="2x" (click)="openRoundInfoModal()"
					 matTooltip="{{ 'GAME.CURRENT_VIEW.ROUND_INFO' | translate }}" matTooltipShowDelay="500">
			</fa-icon>
			<fa-icon [icon]="currentExitIcon" class="fa-icon-custom-hover-orangered" size="2x" (click)="exit()"
					 (mouseenter)="currentExitIcon=faDoorOpen" (mouseleave)="currentExitIcon=faDoorClosed"
					 matTooltip="{{ 'GAME.CURRENT_VIEW.EXIT' | translate }}" matTooltipShowDelay="500">
			</fa-icon>
		</div>
	</div>
	
	<!-- players and theme and effect -->
	<div class="row m-auto justify-content-center game-current-view-current-theme-effect">
		
		<!-- left players -->
		<div class="col game-current-view-players" [ngClass]="addCssPadding()">
			<player-card #leftPlayers *ngFor="let player of getPlayers(true);" [displayOpacity]="addOpacityOnPlayer(player)"
						 [player]="player" [rankOnRight]="true" [displayMedal]="true">
			</player-card>
		</div>
		
		
		<!-- middle -->
		<div class="col game-current-view-middle">
			
			<theme-effect #themeEffect></theme-effect>
			<myst-countdown #preCountdown [hidden]="preCountdownHidden" [ngClass]="preCountdownCssClass" [countdownConfig]="preCountdownConfig" [playAnimation]="true" [audio]="countdownAudio" (onDone)="onPreCountdownEnd()"></myst-countdown>
			<myst-countdown #countdown [hidden]="countdownHidden" [ngClass]="countdownCssClass" [countdownConfig]="countdownConfig" (onNotify)="onCountdownEvent($event)" (onDone)="onCountdownEnd()"></myst-countdown>
			<myst-countdown #postCountdown [hidden]="postCountdownHidden" [ngClass]="postCountdownCssClass" [countdownConfig]="postCountdownConfig" (onDone)="onPostCountdownEnd()"></myst-countdown>
			
			<!-- next music -->
			<div *ngIf="showNextMusic" class="row game-current-view-next-music">
				<div class="col">
					<button class="btn btn-info font-size-normal box-shadow" (click)="nextMusic()">{{ 'GAME.CURRENT_VIEW.NEXT_MUSIC' | translate }}</button>
				</div>
			</div>
			
			<!-- pass music -->
			<div *ngIf="showPassMusic" class="row game-current-view-next-music">
				<div class="col">
					<button class="btn btn-info font-size-normal box-shadow" (click)="passMusic()">{{ 'GAME.CURRENT_VIEW.PASS_MUSIC' | translate }}</button>
				</div>
			</div>
			
			<!-- audio -->
			<div [hidden]="!showAudio" class="row game-current-view-audio">
				<div class="col">
					<audio #audio class="box-shadow"></audio>
				</div>
			</div>
		
		</div>
		
		
		<!-- right players -->
		<div class="col game-current-view-players" [ngClass]="addCssPadding()">
			<player-card #rightPlayers *ngFor="let player of getPlayers(false);" [displayOpacity]="addOpacityOnPlayer(player)"
						 [player]="player" [rankOnRight]="false" [displayMedal]="true">
			</player-card>
		</div>
	
	</div>

</div>
